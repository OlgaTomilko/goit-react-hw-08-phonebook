(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[4],{117:function(t,n,e){"use strict";e.r(n),e.d(n,"default",(function(){return K}));var c=e(34),r=e(35),o=e(37),a=e(36),i=e(0),u=e(3),s=e(18),l=e(8),d=e(25),j=function(t){return t.contacts.items},b=function(t){return t.contacts.filter},f={getContacts:j,getFilter:b,getLoading:function(t){return t.contacts.loading},getVisibleContacts:Object(d.a)([j,b],(function(t,n){var e=n.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(e)}))}))},h=e(16),p=e.n(h),m=e(22),O=e(19),g=e.n(O),v=e(10),x=function(t){var n=t.name,e=t.number;return function(t){var c={name:n,number:e};t(v.b()),g.a.post("/contacts",c).then((function(n){var e=n.data;return t(v.c(e))})).catch((function(n){return t(v.a(n.message))}))}},y=function(t){return function(n){n(v.e()),g.a.delete("/contacts/".concat(t)).then((function(){return n(v.f(t))})).catch((function(t){return n(v.d(t.message))}))}},C=function(){return function(){var t=Object(m.a)(p.a.mark((function t(n){var e,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(v.h()),t.prev=1,t.next=4,g.a.get("/contacts");case 4:e=t.sent,c=e.data,n(v.i(c)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(v.g(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(n){return t.apply(this,arguments)}}()},w=e(112),k=e(116),M=e(1),D=Object(w.a)({form:{width:275,height:150,display:"flex",flexDirection:"column",justifyContent:"space-around"}}),L=Object(l.b)((function(t){return{contacts:f.getContacts(t)}}),(function(t){return{onAdd:function(n){return t(x(n))}}}))((function(t){var n=t.contacts,e=t.onAdd,c=D(),r={name:"",number:""},o=function(t){r=Object(s.a)(Object(s.a)({},r),{},Object(u.a)({},t.target.id,t.target.value))};return Object(M.jsxs)("form",{className:c.form,onSubmit:function(t){t.preventDefault(),n.map((function(t){return t.name})).includes(r.name)?alert("".concat(r.name," is already in contacts.")):e(r)},children:[Object(M.jsx)("label",{children:"Name"}),Object(M.jsx)("input",{type:"text",onChange:o,id:"name"}),Object(M.jsx)("label",{children:"Number"}),Object(M.jsx)("input",{type:"text",onChange:o,id:"number"}),Object(M.jsx)(k.a,{variant:"contained",color:"primary",size:"small",type:"submit",children:"Add contact"})]})})),F=Object(l.b)(null,(function(t){return{updateFilter:function(n){return t(Object(v.j)(n.target.value))}}}))((function(t){var n=t.updateFilter;return Object(M.jsxs)("div",{children:[Object(M.jsx)("p",{children:"Find contacts by name"}),Object(M.jsx)("input",{type:"text",onChange:n,id:"find"})]})})),A=Object(l.b)((function(t){return{contacts:f.getVisibleContacts(t),filter:f.getFilter(t),isLoading:f.getLoading(t)}}),(function(t){return{fetchContacts:function(){return t(C())},onDelete:function(n){return t(y(n))}}}))((function(t){var n=t.contacts,e=t.isLoading,c=t.onDelete,r=t.onClose,o=t.fetchContacts;Object(i.useEffect)((function(){return o()}),[]);var a=function(t){c(t.currentTarget.id),r()};return Object(M.jsxs)(M.Fragment,{children:[e&&Object(M.jsx)("p",{children:"Loading..."}),Object(M.jsx)("ul",{children:n.map((function(t){var n=t.id,e=t.name,c=t.number;return Object(M.jsxs)("li",{children:[e,": ",c,Object(M.jsx)(k.a,{color:"secondary",type:"button",id:n,onClick:a,children:"Delete"})]},n)}))})]})})),N=e(23),E=(e(96),document.querySelector("#modal-root")),_=function(t){Object(o.a)(e,t);var n=Object(a.a)(e);function e(){var t;Object(c.a)(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=n.call.apply(n,[this].concat(o))).handleKeyDown=function(n){"Escape"===n.code&&t.props.onClose()},t.handleBackdropClick=function(n){n.target===n.currentTarget&&t.props.onClose()},t}return Object(r.a)(e,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(N.createPortal)(Object(M.jsx)("div",{className:"Modal__backdrop",onClick:this.handleBackdropClick,children:Object(M.jsx)("div",{className:"Modal__content",children:this.props.children})}),E)}}]),e}(i.Component),K=function(t){Object(o.a)(e,t);var n=Object(a.a)(e);function e(){var t;Object(c.a)(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(t=n.call.apply(n,[this].concat(o))).state={showModal:!1},t.toggleModal=function(){t.setState((function(t){return{showModal:!t.showModal}}))},t}return Object(r.a)(e,[{key:"render",value:function(){return Object(M.jsxs)("div",{children:[this.state.showModal&&Object(M.jsxs)(_,{onClose:this.toggleModal,children:[Object(M.jsx)("h1",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u0443\u0434\u0430\u043b\u0435\u043d"}),Object(M.jsx)(k.a,{variant:"contained",color:"primary",size:"small",type:"button",onClick:this.toggleModal,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]}),Object(M.jsx)("h1",{children:"Phonebook"}),Object(M.jsx)(L,{}),Object(M.jsx)("h2",{children:"Contacts"}),Object(M.jsx)(F,{}),Object(M.jsx)(A,{onClose:this.toggleModal})]})}}]),e}(i.Component)},96:function(t,n,e){}}]);
//# sourceMappingURL=4.86f3a4da.chunk.js.map